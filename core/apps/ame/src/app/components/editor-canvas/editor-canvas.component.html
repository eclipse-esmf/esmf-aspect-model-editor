<!--
  ~ Copyright (c) 2024 Robert Bosch Manufacturing Solutions GmbH
  ~
  ~ See the AUTHORS file(s) distributed with this work for
  ~ additional information regarding authorship.
  ~
  ~ This Source Code Form is subject to the terms of the Mozilla Public
  ~ License, v. 2.0. If a copy of the MPL was not distributed with this
  ~ file, You can obtain one at https://mozilla.org/MPL/2.0/.
  ~
  ~ SPDX-License-Identifier: MPL-2.0
  -->

<div class="editor-canvas-layout">
  <ame-editor-toolbar (closeEditDialog)="closeShapeSettings()"></ame-editor-toolbar>

  <div class="content">
    <ame-editor-sidebar></ame-editor-sidebar>
    <ame-mx-editor class="editor">
      <div class="canvas">
        <div #graph id="graph"></div>
        <ame-editor-canvas-menu></ame-editor-canvas-menu>
      </div>
    </ame-mx-editor>
    <section
      *ngIf="isShapeSettingsOpened$ | async as isOpened"
      [style.width.px]="sidebarWidth"
      class="info-section"
      cdkDragLockAxis="x"
      cdkDrag
    >
      <div
        data-cy="info-section-drag"
        class="info-section__gutter"
        cdkDrag
        cdkDragHandle
        cdkDragLockAxis="x"
        (cdkDragEnded)="onDragEnded($event)"
        [cdkDragFreeDragPosition]="sidebarDragPosition"
      >
        <div class="info-section__indication-line"></div>
        <mat-icon class="info-section__icon">more_vert</mat-icon>
      </div>
      <ame-shape-settings
        [modelElement]="modelElement"
        [isOpened]="isOpened"
        (save)="onSave($event)"
        (afterClose)="resetSelectedShapeForUpdate()"
      >
      </ame-shape-settings>
    </section>
  </div>
  <ame-footer class="footer"></ame-footer>
</div>
